/*! MisEvent 3.0.0 | MIT*/var DEBUG=!1;
window.MisEvent=function(H){function B(a,b){this._func=a;this._data=b;this._disabled=!1}function t(a){var b=a.split(".");2==b.length?(this.eventName=b[0],this.namespace=b[1],this.hasNamespace=!0,DEBUG&&("after"!=this.namespace&&"end"!=this.namespace&&"before"!=this.namespace)&&w('EventName Error: EventName Piex NOT "after" "before" or "end"')):(this.namespace="before",this.eventName=a,this.hasNamespace=!1);this.hasEventName=Boolean(a);this.fullEventName=this.eventName+"."+this.namespace}function m(a,
b){I.test(a)?l(a.split(I),b):b(a,0)}function R(a){return a.substring(2).toLowerCase()}function n(a){a._disabled=!0}function y(){return!0}function w(a){throw"[MisEvent]"+a;}function J(a){var b=a.length,c=a[b-1],d,e=[],j=0;!c._disabled&&!c._hasRunned&&(l(a,function(c,k){if(!c._disabled&&!c._hasRunned){for(j=k;k<b;)e.push(a[k]),k++;return!1}d=c}),console.group("[MisEvent] <Filter Mod> Skip Func"),console.warn("blockFunc",d),console.warn("lastRunnedFuncIndex",j),console.warn("skipFunc",e),console.groupEnd())}
function L(a,b,c,d){a=new t(a);var e;if(!a.hasEventName)return!1;e=C(a.eventName,d);if(!e)return!1;c=new B(b,c);(new M(b)).addFuncData(d._unique,a,c);e.addFuncData(a.namespace,c);return c}function C(a,b){var c=b._objectEventList[a],d;if(!c){c=b._classIniter;d=c._bindEventList[a];if(!d){if(!c._autoInitEvent)return DEBUG&&w('On Error: NOT initEvent "'+a+'"'),!1;d=c._initEvent(a,c._bindDefaults)}c=new S(b,d);b._objectEventList[a]=c}return c}function D(a,b){for(var c in b)a[c]=b[c]}function N(a,b){var c,
d;for(d in b)c=b[d],E(c)&&((c=a[d])||(a[d]=c={}),N(c,a[d]))}function l(a,b){for(var c=0,d=a.length;c<d&&!1!==b(a[c],c);c++);}function z(a){return a&&"function"==typeof a}function E(a){return a&&null!==a&&"object"==typeof a}function A(a,b){a.prototype=b;return a}function F(a,b){var c=a[h];c||(c=new T(a,b),a[h]=c);return c}var U=0,O=[".before",".after",".end"],h="_MisEvent"+(new Date).getTime(),G=h+"_dfEv",I=/\s+/,P=/^on[A-Z]/,T=A(function(a,b){a[h]=this;this._cla=a;this._addEventFuncName="on";this._removeEventFuncName=
"off";this._paramFuncName="param";this._removeParamFuncName="removeParam";this._bindEventOnceFuncName="one";this._triggerFuncName="trigger";this._autoInitEvent=!1;if(b){var c=b.addEventFuncName;c&&(this._addEventFuncName=c);if(c=b.removeEventFuncName)this._removeEventFuncName=c;if(c=b.paramFuncName)this._paramFuncName=c;if(c=b.removeParamFuncName)this._removeParamFuncName=c;if(c=b.bindEventOnceFuncName)this._bindEventOnceFuncName=c;if(c=b.triggerFuncName)this._triggerFuncName=c;this._autoInitEvent=
b.autoInitEvent;this._EventIniterClass=this._getEventIniterClass(b.bindDefaults)}else this._EventIniterClass=this._getEventIniterClass();this._bindEventList={};this._bindEntrance()},{_getEventIniterClass:function(a){var b=!0,c=!1;a&&(a.hasOwnProperty("filter")&&(b=a.filter),a.hasOwnProperty("afterFilter")&&(c=a.afterFilter));return function(a,e,j){this._eventName=a;this._defaultFunc=z(e)?e:null;this._filter=b;this._afterFilter=c;j&&(j.hasOwnProperty("filter")&&(this._filter=j.filter),j.hasOwnProperty("afterFilter")&&
(this._afterFilter=j.afterFilter))}},_initEvent:function(a,b){var c=this,d=this._cla,e;e=new this._EventIniterClass(a,d.prototype[a],b);d.prototype[a]=function(){var b;b=d.prototype.on==this.on?new Q(this,c):this.on[h];C(a,b);return this[a].apply(this,arguments)};return this._bindEventList[a]=e},initEvent:function(a,b){var c=this;m(a,function(a){c._bindEventList[a]||c._initEvent(a,b)})},bindFromConfig:function(a,b){var c,d;for(d in b)if((c=b[d])&&z(c)&&P.test(d))a.on(d.replace(P,R),c)},_bindEntrance:function(){var a=
this._cla,b=this;l([this._addEventFuncName,this._removeEventFuncName,this._paramFuncName,this._removeParamFuncName,this._bindEventOnceFuncName,this._triggerFuncName],function(c){a.prototype[c]=function(a){if(!a)return this;new Q(this,b);return this[c].apply(this,arguments)}})}}),Q=A(function(a,b){this._obj=a;this._objectEventList={};this._classIniter=b;this._unique="_"+ ++U;this._runWithoutList=0;this._bind();this._bindOne();this._bindParam();this._bindTrigger();a.on[h]=this},{_bind:function(){var a=
this._obj,b=this,c=this._objectEventList,d=this._classIniter,e=this._unique;a[d._addEventFuncName]=function(a,c,d){if(!a)return this;d||(d=c,c=H);m(a,function(a){L(a,d,c,b)});return this};a[d._removeEventFuncName]=function(a,b){if(!a){for(var d in c)c[d].mapFuncData(null,n);return this}b?m(a,function(a){var c=new t(a),d=new M(b);d.hasObjData(e)?c.hasEventName?c.hasNamespace?d.mapFuncData(e,c.namespace,n):l(O,function(a){d.mapFuncData(e,c.eventName+a,n)}):(d.getObjData(e),c.hasNamespace?d.mapFuncData(e,
"."+c.namespace,n):l(O,function(a){d.mapFuncData(e,a,n)})):DEBUG&&w("Off Error: callback has No Data")}):m(a,function(a){a=new t(a);var b;if(a.hasEventName)(b=c[a.eventName])&&b.mapFuncData(a.hasNamespace?a.namespace:null,n);else if(a.hasNamespace)for(b in c)c[b].mapFuncData(b+"."+a.namespace,n);else{for(b in c)c[b].mapFuncData(null,n);return!1}});return this}},_bindOne:function(){var a=this,b=this._obj,c=this._classIniter._addEventFuncName;this._obj[this._classIniter._bindEventOnceFuncName]=function(d,
e,j){if(!d)return this;z(j)||(offAfterRunned=j,j=e,e=H);m(d,function(d){var k=L(d,j,e,a);k&&(d=new t(d),b[c](d.eventName+".end",function(){k._disabled=!0}))});return this}},_bindParam:function(){var a=this._obj,b=this,c=this._classIniter,d=this._objectEventList;a[c._paramFuncName]=function(a,c,K){if(!a)return this;if(E(c))return m(a,function(a){(a=C(a,b))&&a.setParam(c,K)}),this;if(objectEvent=d[a])return objectEvent.getParam(c,K)};a[c._removeParamFuncName]=function(a,b,c){if(!eventName)return this;
c=!1!==c;m(a,function(a){(objectEvent=d[a])&&objectEvent.removeParam(b,c)});return this}},_bindTrigger:function(){var a=this,b=this._classIniter,c=b._bindEventList;this._obj[b._triggerFuncName]=function(b,e,j){var l=c[b];b=l?l._defaultFunc:this[b];var k;b&&(j?(a._runWithoutList++,k=b.apply(this,e),a._runWithoutList--):k=b.apply(this,e));return k}}}),S=A(function(a,b){this._objectIniter=a;this._eventIniter=b;this._runParam={};this._baseParam={};this.before=[];this.after=[];this.end=[];a._obj[b._eventName]=
this._getOverrideDefaultFunc(!0)},{_resetRunParam:function(){var a=this,b=function(){a.param.apply(a,arguments)};N(b,this._baseParam);D(b,this._runParam);return this._runParam=b},_getOverrideDefaultFunc:function(){var a=this,b=this._objectIniter,c=b._obj,d=function(b,c){a.removeParam(b,c);return this},e=this._eventIniter,j=e._filter,l=e._afterFilter,k=e._defaultFunc,h=this.before,p=this.after,n=this.end;return function(){if(b._runWithoutList){if(k)return k.apply(this,arguments)}else{var e=Array.prototype.slice.call(arguments),
m=a._resetRunParam(),r,x,f,g,t=!1,s=!1;g=function(){t=!0};var q=function(){s=!0},u,v;e.unshift(null);if(f=h.length)if(j){u=function(a){this.data=a._data;this.next=a.nextFunc;this.off=function(){a._disabled=!0}};u.prototype={param:m,removeParam:d,preventDefault:g,stopImmediatePropagation:q};for(g=function(a){DEBUG&&(a._hasRunned=!1);return function(){if(s)return!1;for(DEBUG&&a._hasRunned&&w("Func has runned before");a._disabled;)a=a.nextFuncData;e[0]=new u(a);DEBUG&&(a._hasRunned=!0);return!1!==a._func.apply(c,
e)}};f--;)thisFuncData=h[f],thisFuncData._disabled?h.splice(f,1):((nextFuncData=h[f+1])?(thisFuncData.nextFunc=g(nextFuncData),thisFuncData.nextFuncData=nextFuncData):(thisFuncData.nextFunc=y,nextFuncData=new B(y),nextFuncData.thisFunc=y),thisFuncData.nextFuncData=nextFuncData);if(g=h[0])e[0]=new u(g),DEBUG&&(g._hasRunned=!0),g._func.apply(this,e),DEBUG&&J(h)}else{u=function(a){this.preReturn=r;this.data=a._data;this.off=function(){a._disabled=!0}};u.prototype={param:m,removeParam:d,preventDefault:g,
stopImmediatePropagation:q};for(f=0;f<h.length;f++)if(g=h[f],g._disabled)h.splice(f,1),f--;else if(e[0]=new u(g),r=g._func.apply(this,e),s)break}if(!t&&!s&&(k&&(k[G]={preReturn:r,param:m,removeParam:d,stopImmediatePropagation:q},r=x=k.apply(this,arguments)),f=p.length,!s&&f))if(l){v=function(a){this.preReturn=r;this.data=a._data;this.next=a.nextFunc;this.off=function(){a._disabled=!0}};v.prototype={defaultReturn:x,param:m,removeParam:d,stopImmediatePropagation:stopImmediatePropagation};for(q=function(a){DEBUG&&
(a._hasRunned=!1);return function(){if(s)return!1;for(DEBUG&&a._hasRunned&&w("Func has runned before");a._disabled;)a=a.nextFuncData;e[0]=new v(a);DEBUG&&(a._hasRunned=!0);return!1!==a._func.apply(c,e)}};f--;)thisFuncData=p[f],thisFuncData._disabled?p.splice(f,1):((nextFuncData=p[f+1])?(nextFunc=q(nextFuncData),thisFuncData.nextFuncData=nextFuncData):(nextFunc=y,thisFuncData.nextFuncData=new B(nextFunc),thisFuncData.nextFuncData.thisFunc=nextFunc),thisFuncData.nextFunc=nextFunc);if(g=p[0])e[0]=new v(g),
DEBUG&&(g._hasRunned=!0),g._func.apply(this,e),DEBUG&&J(p)}else{v=function(a){this.preReturn=r;this.data=a._data;this.off=function(){a._disabled=!0}};v.prototype={defaultReturn:x,param:m,removeParam:d,stopImmediatePropagation:q};for(f=0;f<p.length;f++)if(g=p[f],g._disabled)p.splice(f,1),f--;else if(e[0]=new v(g),r=g._func.apply(this,e),s)break}if(n.length){q=function(a){this.preReturn=r;this.data=a._data;this.off=function(){a._disabled=!0}};q.prototype={defaultReturn:x,param:m,removeParam:d};for(f=
0;f<n.length;f++)if(g=n[f],g._disabled)n.splice(f,1),f--;else if(e[0]=new q(g),g._func.apply(this,e),s)break}return x}}},addFuncData:function(a,b){this[a].push(b)},getFuncData:function(a){return this[a]},mapFuncData:function(a,b){a?l(this[a],b):(l(this.before,b),l(this.after,b),l(this.end,b))},param:function(a,b){return E(a)?(this.setParam(a,b),this):this.getParam(a,b)},getParam:function(a,b){return b?this._baseParam[a]:this._runParam[a]},setParam:function(a,b){b&&D(this._baseParam,a);D(this._runParam,
a)},removeParam:function(a,b){b&&delete this._baseParam[a];delete this._runParam[a]}}),M=A(function(a){if(a[h])return a[h];this.func=a;a[h]=this},{hasObjData:function(a){return this[a]?!0:!1},getObjData:function(a){var b=this[a];b||(b={},this[a]=b);return b},hasFuncData:function(a,b){try{return this[a][b]?!0:!1}catch(c){return!1}},getFuncData:function(a,b){var c=this[a],d;c?(d=c[b])||(d=c[b]=[]):(c={},d=c[b]=[],this[a]=c);return d},mapFuncData:function(a,b,c){try{l(this[a][b],c)}catch(d){}},addFuncData:function(a,
b,c){this.getFuncData(a,b.fullEventName).push(c);this.getFuncData(a,"."+b.namespace).push(c)}});F.namespace=h;F.event=function(a){return z(a)?a[G]:a.callee[G]};return F}();

//@ sourceMappingURL=MisEvent.js.map